@implements IDisposable
@implements IModal

<Modal @ref="Modal">
  <Header>
    <ModalHeader TitleText="Select generic type " OnClose="Modal!.Close"></ModalHeader>
  </Header>

  <Body>
    @if (GenericTypes != null)
    {
      foreach (var item in GenericTypes)
      {
        <!-- <TypeSelectComponent @key="item" TypeCollection="TypeCollection" Label="@($"Generic type <{item.Key}>")"
      @bind-Value="item.Value">
        </TypeSelectComponent> -->

        <VariableTypeConstructorComponent @key="item" @ref="item.ObjRef" TypeCollection="TypeCollection" VariableType="item.Value">
        </VariableTypeConstructorComponent>

      }
    }
  </Body>

  <Footer>
    <ModalFooter OnClose="Modal!.Close" OnApply="Modal!.Apply"></ModalFooter>
  </Footer>
</Modal>
@code {
  public class GenericTypeDescription
  {
    public string Key { get; set; } = string.Empty;
    public Type? Value { get; set; } = null;
    public object? ObjRef { get; set; } = null;
  }

  [Parameter]
  public List<Type>? TypeCollection { get; set; }

  [Parameter]
  public List<GenericTypeDescription>? GenericTypes { get; set; }

  public List<Type>? BuildedTypes { get=>GenericTypes?.Select(s=>((VariableTypeConstructorComponent)s.ObjRef).BuildedType).ToList(); }

  public ModalResult ModalResult { get => Modal!.ModalResult; }
}